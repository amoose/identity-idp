---
env:
  RAILS_ENV: development
  RACK_ENV: development
  MAX_THREADS: 1
  WEB_CONCURRENCY: 2
  BUNDLE_WITHOUT: test
  TERM_CHILD: 1
services:
  - icam-psql
  - icam-redis
buildpack:
   https://github.com/cloudfoundry/ruby-buildpack.git

applications:
-  name: logon-dev
   host: logon-dev
   path: .
   memory: 512M
   instances: 1
   domain: 18f.gov
   stack: cflinuxfs2
   command: script/web-start

-  name: logon-worker-dev
   memory: 256M
   instances: 1
   domain: 18f.gov
   path: .
   command: script/worker-start
   no-route: true
#Reference
#   https://docs.cloudfoundry.org/buildpacks/ruby/ruby-tips.html#precompile
#   https://docs.cloudfoundry.org/buildpacks/ruby/ruby-tips.html#BUNDLE-WITHOUT
#   https://docs.cloudfoundry.org/buildpacks/ruby/ruby-prod-server.html
#   https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server
